pipeline {
    agent { label 'dev-test' }
    parameters {
        string(description: "Deployment template path", name: "DEPLOYMENT_PATH", defaultValue:  "${params?.DEPLOYMENT_PATH}" )
        string(description: "Volume claim name", name: "VOLUME_CLAIM", defaultValue: "${params?.VOLUME_CLAIM}")
    }
    stages {
        stage('Scale replicas') {
            steps {
                withCredentials([usernamePassword(credentialsId: 'AWS', usernameVariable: 'AWS_ACCESS_KEY_ID', passwordVariable: 'AWS_SECRET_ACCESS_KEY')]) {                 
                    sh '${DEPLOYMENT_PATH} ${VOLUME_CLAIM}'
                }
            }
        }
    }
}